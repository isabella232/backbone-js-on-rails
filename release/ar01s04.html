<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Organization</title><link rel="stylesheet" href="stylesheets/handbookish.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.74.1" /><link rel="home" href="index.html" title="Backbone.js on Rails" /><link rel="up" href="index.html" title="Backbone.js on Rails" /><link rel="prev" href="ar01s03.html" title="Introduction (section unstarted)" /><link rel="next" href="ar01s05.html" title="Rails Integration" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Organization</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ar01s03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s05.html">Next</a></td></tr></table><hr /></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_organization"></a>Organization</h2></div></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="_backbone_js_and_mvc"></a>Backbone.js and MVC</h3></div></div></div><p>Model–View–Controller (MVC) is an architectural pattern used in many applications to isolate "domain logic" (the application logic for the user) from the user interface (input and presentation).</p><div class="figure"><a id="idp4490480"></a><p class="title"><b>Figure 1. Model-view-controller concept</b></p><div class="figure-contents"><div class="mediaobject"><img src="image/MVCDiagram.png" alt="image/MVCDiagram.png" /></div></div></div><br class="figure-break" /><p>In the above diagram, a solid line represents a direct association, a dashed line an indirect association (for example, via an observer).</p><p>As a user of Rails, you’re likely already familiar with the concept of MVC and the benefits that the separation of concerns can give you. However, Rails itself is not doing "traditional" MVC. A traditional MVC is event-based. This means that the views trigger events which the controller figures out what to do with. It can be argued that the requests generated by the browser are the "events" in Rails, however, due to the single-threaded, request-response nature of the web, the control flow between the different levels of MVC is much more straight-forward.</p><p>Given that Javascript has events, and that much of the interactions between the different components of Backbone.js in the browser are not limited to request/response, programming with Backbone.js is in a lot of ways more like working with a traditional MVC architecture.</p><p>That being said, technically speaking, Backbone.js is <span class="emphasis"><em>not</em></span> MVC, and this was acknowledged by the creators of Backbone.js when they renamed Controllers to Routers in version 0.5.0.</p><p>So what is Backbone.js then if not MVC? Technically speaking, it’s just the Models and the Views with a Router to handle flow between them. In Backbone.js the views will handle many of the aspects that controllers would typically handle, such as actually figuring out what to do next and what to render.</p><p>While you could do it, the benefit of actually introducing a Controller in your application would be limited, and the more pragmatic approach is to realize the great organization that Backbone.js gives you is much better than what you had before. The fact that it doesn’t have a nice name, or strict adherence to a pattern, isn’t worth worrying about.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="_what_goes_where"></a>What Goes Where</h3></div></div></div><p>Part of the initial learning curve of Backbone.js can be figuring out what goes where, and mapping it to your expectations set by working with Rails. In Rails we have Models, Views, Controllers, and Routers. In Backbone.js, we have Models, Views, Templates, and Routers.</p><p>The models in Backbone.js and Rails are analogous. Because it lacks controllers, Backbone.js routers and views work together to pick up the functionality provided by Rails controllers. Finally, in Rails, when we say views, we actually mean templates. In Backbone.js, however, you have a separation between the view and templates.</p><p>Once you introduce Backbone.js into your stack, you grow the layers in your stack by four levels. This can be daunting at first, and frankly, at times it can be difficult to keep everything going on in your application straight. Ultimately, the additional organization and functionality of Backbone.js outweighs the costs, so let’s break it down.</p><div class="itemizedlist"><p class="title"><b>Rails</b></p><ul type="disc"><li>
Model
</li><li>
Controller
</li><li>
View
</li></ul></div><div class="itemizedlist"><p class="title"><b>Backbone.js</b></p><ul type="disc"><li>
Model
</li><li>
Router
</li><li>
View
</li><li>
Template
</li></ul></div><p>In a typical Rails and Backbone.js application, the initial interaction between the layers will be as follows:</p><div class="itemizedlist"><ul type="disc"><li>
A request from a user comes in the <span class="strong"><strong>Rails router</strong></span> identifies what should handle the request based on the URL
</li><li>
The <span class="strong"><strong>Rails controller action</strong></span> to handle the request is called, some initial processing may be performed
</li><li>
The <span class="strong"><strong>Rails view template</strong></span> is rendered and returned to the user’s browser
</li><li>
The <span class="strong"><strong>Rails view template</strong></span> will include <span class="strong"><strong>Backbone.js initialization</strong></span>, usually this is populating some <span class="strong"><strong>Backbone models</strong></span> with JSON data provided by the <span class="strong"><strong>Rails view</strong></span>
</li><li>
The <span class="strong"><strong>Backbone.js router</strong></span> determines which of its methods should handle the display based on the URL
</li><li>
The <span class="strong"><strong>Backbone.js router</strong></span> method calls that method, some initial processing may be performed, and one or more <span class="strong"><strong>Backbone.js views</strong></span> are rendered
</li><li>
The <span class="strong"><strong>Backbone.js view</strong></span> reads <span class="strong"><strong>templates</strong></span> and uses <span class="strong"><strong>Backbone.js</strong></span> models to render itself onto the page
</li></ul></div><p>At this point, the user will see a nice page in their browser and be able to interact with it. The user interacting with elements on the page will trigger actions to be taken at any level of the above sequence: <span class="strong"><strong>Backbone.js model</strong></span>, <span class="strong"><strong>Backbone.js views</strong></span>, <span class="strong"><strong>Backbone.js router</strong></span>, or requests to the remote server.</p><p>Requests to the remote server may be any one of the following:</p><div class="itemizedlist"><ul type="disc"><li>
At the <span class="strong"><strong>Backbone.js model</strong></span> level, communicating with Rails via JSON.
</li><li>
Normal Ajax requests, not using Backbone.js at all.
</li><li>
Normal requests that don’t hit Backbone.js and trigger a full page reload.
</li></ul></div><p>Which of the above remote server interactions you use will depend upon the desired result, and the type of user interface. This book should help you understand which interaction you’ll want to choose for each portion of your application.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="_namespacing_your_application_chapter_unstarted"></a>Namespacing your application (chapter unstarted)</h3></div></div></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s03.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Introduction (section unstarted) </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Rails Integration</td></tr></table></div></body></html>
